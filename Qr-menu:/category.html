<script>
(async () => {
  const params = new URLSearchParams(window.location.search);
  const catSlug = params.get("cat");

  if (!catSlug) return;

  const res = await fetch("/api/menu");
  const data = await res.json();

  if (!data.ok) return;

  const category = data.categories.find(c => c.slug === catSlug);

  if (!category) return;

  document.querySelector("#categoryTitle").textContent =
    category.titleTR;

  const list = document.querySelector("#productList");
  list.innerHTML = "";

  category.items.forEach(item => {
    const el = document.createElement("div");
    el.className = "product";

    el.innerHTML = `
      <div class="product-info">
        <div class="name">${item.name}</div>
        <div class="desc">${item.desc || ""}</div>
      </div>
      <div class="price">${item.price || ""}</div>
    `;

    list.appendChild(el);
  });
})();
</script>
